<% provide(:title, 'All users') %>
<h1>All users</h1>

<div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Friends</h3>
        </div>
        <div class="panel-body">
          <ul id="sessionlist">
            <% for friend in current_user.friends %>
              <li> <%= link_to friend.name, friend %> </li>
            <% end %>
          </ul>
        </div>
      </div>
      
<ul class="users">
    <% @users.each do |user| %>
        <li>
            <%= user.name %> |
            <%= link_to "Add Friend", friendships_path(friend_id: user), method: :post %>
        </li>
    <% end %>
</ul>

<h3> Friend Requests </h3>

<h5>Received: </h5>

<ul>
    <% current_user.received_friendships.where(accepted: false).each do |request| %>
    <li>
      <%= request.user.name %>
      <%= link_to "Accept",  friendship_path(id: request.id), method: "put" %>
      <%= link_to "Decline", friendship_path(id: request.id), method: :delete %>
    </li>
  <% end %>
</ul>

<h5> Sent: </h5>

<ul>
    <% current_user.friendships.where(accepted: false).each do |request| %>
    <li>
      <%= request.friend.name %>
    </li>
  <% end %>
</ul>